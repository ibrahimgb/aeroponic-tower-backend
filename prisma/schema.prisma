// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  email     String   @unique
  hash      String?
  firstName String?
  lastName  String?

  @@map("users")
}

model PumpInterval {
  id          Int     @id @default(autoincrement())
  timeOff     Int     @default(25)
  timeOn      Int     @default(15)
  description String?


  AeroponicTower AeroponicTower[]
}

model AeroponicTower {
  id             Int               @id @default(autoincrement())
  size           Int
  content        String
  SensorData     SensorData[]
  pumpIntervalID Int
  PumpInterval PumpInterval @relation(fields: [pumpIntervalID],references: [id])

  //PumpIntervalID Int
  //pumpInterval   PumpInterval @relation(fields: [PumpIntervalID], references: [id])
}

model SensorData {
  model            String
  unit             String
  sensorReading    Float
  timeCaptured     DateTime       @default(now())
  aeroponicTowerID Int
  aeroponicTower   AeroponicTower @relation(fields: [aeroponicTowerID], references: [id])

  @@id([model, timeCaptured, aeroponicTowerID])
}
